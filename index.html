<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spanish Practice ‚Äî Flashcards & Quizzes</title>
<style>
  :root{
    --bg:#b8dbff;
    --card:#ffffffcc;
    --accent:#4a90e2;
    --muted:#555;
    --radius:14px;
    font-family: 'Nocken', sans-serif;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#b8dbff 0%, #d6ecff 60%);color:#061018;position:relative;overflow-x:hidden;}

  .container{max-width:1100px;margin:28px auto;padding:24px;position:relative;z-index:1;}
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  header h1{font-size:30px;margin:0}
  header .subtitle{color:var(--muted);font-size:20px}
  .app{display:grid;grid-template-columns:260px 1fr;gap:20px}
  nav{background:var(--card);padding:16px;border-radius:12px;min-height:480px}
  nav button{display:block;width:100%;padding:12px 16px;margin-bottom:10px;border:0;background:transparent;color:var(--muted);text-align:left;border-radius:20px;font-size:20px;cursor:pointer}
  nav button.active{background:var(--accent);color:#fff;font-weight:600}
  main{background:var(--card);padding:20px;border-radius:14px;min-height:480px}
  .panel{display:none}
  .panel.active{display:block}
  .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.1);margin-bottom:12px}
  input[type=text], textarea{background:#ffffffcc;border:1px solid rgba(0,0,0,0.1);color:inherit;padding:10px;border-radius:8px;width:100%;font-size:18px}
  .big{font-size:28px;font-weight:600;margin-bottom:12px}
  .muted{color:var(--muted);font-size:16px;margin-bottom:8px}
  .btn{padding:12px 18px;border-radius:20px;border:0;font-size:18px;cursor:pointer;margin:2px}
  .btn.primary{background:var(--accent);color:#fff}
  .btn.ghost{background:#fff;color:var(--accent);border:1px solid var(--accent)}
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
  .choice{padding:12px;border-radius:20px;border:1px solid rgba(0,0,0,0.05);cursor:pointer;background:#f2f2f2;font-size:18px}
  .choice.correct{border-color:#3fe09b;background:#d4f5e3;color:#061018}
  .choice.wrong{border-color:#ff7171;background:#ffd6d6;color:#061018}
</style>
</head>
<body>

<div class="container">
  <header>
    <div>
      <h1>Spanish Practice</h1>
      <div class="subtitle">Flashcards + Quiz + Fill-in-the-Blank</div>
    </div>
  </header>

  <div class="app">
    <!-- NAV -->
    <nav class="card">
      <button class="active" data-panel="flash">Flashcards</button>
      <button data-panel="quiz">Quiz</button>
      <button data-panel="fill">Fill-in-the-Blank</button>
      <button data-panel="manage">Add/Manage Words</button>
      <hr>
      <button id="btn-import" class="btn ghost">Import Words</button>
      <button id="btn-export" class="btn ghost">Export Words</button>
    </nav>

    <!-- MAIN PANELS -->
    <main>
      <!-- FLASHCARDS -->
      <section id="flash" class="panel active">
        <div class="card">
          <div id="card-word" class="big">‚Äî</div>
          <div style="display:flex;gap:12px">
            <button id="flip" class="btn ghost">Flip</button>
            <button id="next-card" class="btn primary">Next</button>
          </div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="panel">
        <div class="card">
          <div class="muted">Choose the correct English meaning of the Spanish word:</div>
          <div id="q-word" class="big">‚Äî</div>
          <div class="choices" id="q-choices"></div>
          <div id="q-feedback" class="muted"></div>
        </div>
      </section>

      <!-- FILL-IN-THE-BLANK -->
      <section id="fill" class="panel">
        <div class="card">
          <div class="muted">Complete the sentence in Spanish:</div>
          <div id="fill-sentence" class="big">‚Äî</div>
          <input id="fill-answer" type="text" placeholder="Type your answer here" />
          <div style="margin-top:8px">
            <button id="fill-check" class="btn primary">Check</button>
          </div>
          <div id="fill-feedback" class="muted"></div>
          <div id="fill-wordbank" style="margin-top:12px"></div>
        </div>
      </section>

      <!-- MANAGE WORDS -->
      <section id="manage" class="panel">
        <div class="card">
          <input id="new-es" type="text" placeholder="Spanish" />
          <input id="new-en" type="text" placeholder="English" />
          <button id="add-word" class="btn primary">Add Word</button>
          <textarea id="quick-import" rows="5" placeholder="Paste words: hola, hello"></textarea>
          <button id="apply-quick" class="btn primary">Import Multiple</button>
          <div id="words-list" style="margin-top:12px;"></div>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
let state={words:[],sessions:0};
const STORAGE_KEY='spanish_practice_v2';
function saveState(){localStorage.setItem(STORAGE_KEY,JSON.stringify(state)); renderWords();}
function loadState(){const raw=localStorage.getItem(STORAGE_KEY);if(raw)try{state=JSON.parse(raw);}catch(e){state={words:[],sessions:0};}}
loadState();

/* NAV */
document.querySelectorAll('nav button[data-panel]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('nav button[data-panel]').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(b.dataset.panel).classList.add('active');
  });
});

/* FLASHCARDS */
let flashIndex=0;
function renderFlash(){
  if(!state.words.length){document.getElementById('card-word').innerText='‚Äî';return;}
  const w=state.words[flashIndex%state.words.length];
  document.getElementById('card-word').innerText=w.es;
}
document.getElementById('flip').addEventListener('click', ()=>{
  const w=state.words[flashIndex%state.words.length];
  document.getElementById('card-word').innerText=w.en;
});
document.getElementById('next-card').addEventListener('click', ()=>{
  flashIndex++; renderFlash();
});

/* QUIZ */
let quizIndex=0;
function renderQuiz(){
  if(!state.words.length) return;
  const w=state.words[quizIndex%state.words.length];
  document.getElementById('q-word').innerText=w.es;
  document.getElementById('q-feedback').innerText='';
  const choicesEl=document.getElementById('q-choices');
  choicesEl.innerHTML='';
  let options=[w.en];
  while(options.length<4 && state.words.length>1){
    const r=state.words[Math.floor(Math.random()*state.words.length)].en;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const b=document.createElement('button');
    b.className='choice';
    b.innerText=opt;
    b.onclick=()=>{
      if(opt===w.en){document.getElementById('q-feedback').innerText='Correct! üéâ'; quizIndex++; setTimeout(renderQuiz,500);}
      else document.getElementById('q-feedback').innerText='Incorrect. Try again.';
    };
    choicesEl.appendChild(b);
  });
}

/* FILL-IN-THE-BLANK */
let fillIndex=0;
function generateSentence(word){
  const templates=[
    `La ni√±a ______ mucho y sus padres est√°n enojados con ella.`,
    `Cuando entro a la clase, siempre dice ______ a sus compa√±eros.`,
    `Me gusta ______ frutas y verduras todos los d√≠as.`,
    `El ______ de mi vecino es muy amistoso y juguet√≥n.`,
    `Cada ma√±ana, los ni√±os van a la ______ con entusiasmo.`,
    `Estoy leyendo un ______ interesante sobre historia antigua.`,
    `Los atletas ______ r√°pido para ganar la carrera.`
  ];
  const map={hola:templates[1], comer:templates[2], perro:templates[3], escuela:templates[4], libro:templates[5], miente:templates[0], correr:templates[6]};
  return map[word.es] || `Complete the blank with the correct Spanish word: ______`;
}

function renderFill(){
  if(!state.words.length) return;
  const w=state.words[fillIndex%state.words.length];
  document.getElementById('fill-sentence').innerText=generateSentence(w);
  document.getElementById('fill-answer').value='';
  document.getElementById('fill-feedback').innerText='';

  const bank=document.getElementById('fill-wordbank');
  bank.innerHTML='';
  let options=[w.es];
  while(options.length<4 && state.words.length>1){
    const r=state.words[Math.floor(Math.random()*state.words.length)].es;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const b=document.createElement('button');
    b.className='btn ghost';
    b.innerText=opt;
    b.onclick=()=>document.getElementById('fill-answer').value=opt;
    bank.appendChild(b);
  });
}

document.getElementById('fill-check').addEventListener('click', ()=>{
  const w=state.words[fillIndex%state.words.length];
  const ans=document.getElementById('fill-answer').value.trim().toLowerCase();
  if(ans===w.es.toLowerCase()){
    document.getElementById('fill-feedback').innerText='Correct! üéâ';
    fillIndex++;
    setTimeout(renderFill,500);
  } else document.getElementById('fill-feedback').innerText='Incorrect. Try again.';
});

/* Manage words */
function renderWords(){
  const list=document.getElementById('words-list');
  list.innerHTML='';
  state.words.forEach(w=>{
    const div=document.createElement('div'); div.innerText=w.es+' ‚Üí '+w.en; list.appendChild(div);
  });
  renderFlash();
  renderQuiz();
  renderFill();
}
document.getElementById('add-word').addEventListener('click', ()=>{
  const es=document.getElementById('new-es').value.trim(), en=document.getElementById('new-en').value.trim(); if(!es||!en)return;
  state.words.push({es,en}); saveState(); document.getElementById('new-es').value=''; document.getElementById('new-en').value='';
});
document.getElementById('apply-quick').addEventListener('click', ()=>{
  const lines=document.getElementById('quick-import').value.split('\n');
  lines.forEach(l=>{ const p=l.split(','); if(p.length>=2) state.words.push({es:p[0].trim(), en:p[1].trim()}); });
  saveState(); document.getElementById('quick-import').value='';
});

/* Import/Export */
document.getElementById('btn-export').addEventListener('click', ()=>{
  const blob=new Blob([JSON.stringify(state.words,null,2)],{type:'application/json'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='words.json'; a.click();
});
document.getElementById('btn-import').addEventListener('click', ()=>{
  const file=document.createElement('input'); file.type='file'; file.accept='application/json'; file.onchange=e=>{
    const f=e.target.files[0]; if(!f)return;
    const reader=new FileReader(); reader.onload=ev=>{
      try{
        const arr=JSON.parse(ev.target.result);
        if(Array.isArray(arr)){ arr.forEach(w=>{ if(w.es && w.en) state.words.push(w); }); saveState(); }
      }catch(err){ alert('Invalid JSON'); }
    };
    reader.readAsText(f);
  }; file.click();
});

renderWords();
</script>

</body>
</html>
