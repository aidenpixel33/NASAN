<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spanish Practice — Flashcards & Quizzes</title>
<link href="https://fonts.googleapis.com/css2?family=Noken:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#e6f0ff;
  --card:#ffffffcc;
  --accent:#4a90e2;
  --muted:#555;
  --radius:20px;
  font-family:'Noken', sans-serif;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:#061018;}
.container{max-width:1100px;margin:28px auto;padding:24px;}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
header h1{font-size:30px;margin:0}
header .subtitle{color:var(--muted);font-size:20px}
.app{display:grid;grid-template-columns:260px 1fr;gap:20px}
nav{background:var(--card);padding:16px;border-radius:20px;min-height:480px}
nav button{display:block;width:100%;padding:14px 16px;margin-bottom:10px;border:0;background:var(--accent);color:white;text-align:center;border-radius:40px;cursor:pointer;font-size:16px;font-weight:600;transition:0.2s}
nav button.active{background:#2f6dc4}
main{background:var(--card);padding:20px;border-radius:20px;min-height:480px}
.panel{display:none}
.panel.active{display:block}
.card{background:var(--card);padding:18px;border-radius:20px;box-shadow:0 6px 20px rgba(2,6,23,0.1);margin-bottom:20px}
input[type=text], textarea, select{background:#ffffffcc;border:1px solid rgba(0,0,0,0.1);color:inherit;padding:10px;border-radius:12px;width:100%}
.big{font-size:28px;font-weight:600;text-align:center;margin-bottom:12px}
.muted{color:var(--muted);font-size:14px;text-align:center;margin-bottom:12px}
.btn{padding:12px 18px;border-radius:40px;border:0;cursor:pointer;margin:4px;transition:0.2s;font-weight:600}
.btn.primary{background:var(--accent);color:#fff;}
.btn.ghost{background:#fff;border:1px solid rgba(0,0,0,0.1);color:var(--muted);}
.center{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}
.choices{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
.choice{padding:12px;border-radius:20px;border:1px solid rgba(0,0,0,0.05);cursor:pointer;background:rgba(255,255,255,0.7);text-align:center}
.choice.correct{border-color:rgba(63,224,155,0.9);background:rgba(63,224,155,0.1);color:#061018}
.choice.wrong{border-color:rgba(255,113,113,0.95);background:rgba(255,113,113,0.1);color:#061018}
.wordbank{display:flex;flex-wrap:wrap;justify-content:center;margin-top:12px}
.wordbank .btn{margin:4px;font-size:14px}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>Spanish Practice</h1>
      <div class="subtitle">Flip + Check: Enter, New Words + Next: Shift</div>
    </div>
    <div class="muted">Built for practicing Spanish — open-source & offline</div>
  </header>

  <div class="app">
    <!-- NAV -->
    <nav>
      <button class="active" data-panel="flash">Flashcards</button>
      <button data-panel="quiz">Quiz</button>
      <button data-panel="fill">Fill-in-the-Blank</button>
      <button data-panel="manage">Add / Manage Words</button>
    </nav>

    <!-- MAIN PANELS -->
    <main>
      <!-- FLASHCARDS -->
      <section id="flash" class="panel active">
        <div class="card">
          <div class="big" id="card-word">—</div>
          <div class="center">
            <button id="flip" class="btn ghost">Flip</button>
            <button id="next-card" class="btn primary">Next</button>
          </div>
          <div class="muted" id="card-translation"></div>
        </div>
      </section>

      <!-- QUIZ -->
      <section id="quiz" class="panel">
        <div class="card">
          <div class="muted">Choose the English meaning:</div>
          <div class="big" id="quiz-word">—</div>
          <div class="choices" id="q-choices"></div>
        </div>
      </section>

      <!-- FILL-IN-THE-BLANK -->
      <section id="fill" class="panel">
        <div class="card">
          <div class="muted">Complete the sentence (in Spanish):</div>
          <div class="big" id="fill-sentence">—</div>
          <input type="text" id="fill-answer" placeholder="Type your answer here" />
          <div class="center">
            <button id="fill-check" class="btn primary">Check</button>
            <button id="fill-next" class="btn ghost">Next</button>
          </div>
          <div class="muted" id="fill-feedback"></div>
          <div class="wordbank" id="fill-wordbank"></div>
        </div>
      </section>

      <!-- MANAGE WORDS -->
      <section id="manage" class="panel">
        <div class="card">
          <input id="new-es" type="text" placeholder="Spanish" />
          <input id="new-en" type="text" placeholder="English" />
          <button id="add-word" class="btn primary">Add Word</button>
          <textarea id="quick-import" rows="5" placeholder="Paste words: hola, hello"></textarea>
          <button id="apply-quick" class="btn primary">Import Multiple</button>
          <div id="words-list" style="margin-top:12px"></div>
        </div>
      </section>
    </main>
  </div>
</div>

<script>
/* Persistent storage */
let state = {words:[], sessions:0};
const STORAGE_KEY = 'spanish_practice_v3';
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); renderWords(); }
function loadState(){ const raw=localStorage.getItem(STORAGE_KEY); if(raw) try{ state=JSON.parse(raw); }catch{ state={words:[],sessions:0}; } }
loadState();

/* NAVIGATION */
document.querySelectorAll('nav button[data-panel]').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('nav button[data-panel]').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(b.dataset.panel).classList.add('active');
    if(b.dataset.panel==='quiz') renderQuiz();
    if(b.dataset.panel==='fill') renderFill();
  });
});

/* FLASHCARDS */
let flashIndex = 0;
function renderFlash(){
  if(!state.words.length){ document.getElementById('card-word').innerText='—'; document.getElementById('card-translation').innerText=''; return; }
  const w = state.words[flashIndex % state.words.length];
  document.getElementById('card-word').innerText=w.es;
  document.getElementById('card-translation').innerText=''; // hide until flipped
}
document.getElementById('flip').addEventListener('click', ()=>{
  const w = state.words[flashIndex % state.words.length];
  document.getElementById('card-translation').innerText=w.en;
});
document.getElementById('next-card').addEventListener('click', ()=>{
  flashIndex++; renderFlash();
});

/* QUIZ */
let quizIndex = 0;
function renderQuiz(){
  if(!state.words.length) return;
  const w = state.words[quizIndex % state.words.length];
  document.getElementById('quiz-word').innerText = w.es;

  // Generate multiple choice options (English)
  let options = [w.en];
  while(options.length < 4 && state.words.length>1){
    const r = state.words[Math.floor(Math.random()*state.words.length)].en;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);

  const container = document.getElementById('q-choices');
  container.innerHTML='';
  options.forEach(opt=>{
    const b = document.createElement('div');
    b.className='choice';
    b.innerText=opt;
    b.onclick=()=>{
      container.querySelectorAll('.choice').forEach(c=>c.classList.remove('correct','wrong'));
      if(opt===w.en) b.classList.add('correct'); else b.classList.add('wrong');
      quizIndex++;
      setTimeout(renderQuiz,1000);
    };
    container.appendChild(b);
  });
}

/* FILL-IN-THE-BLANK */
let fillIndex = 0;
function generateSentence(word){
  const templates = [
    "La ______ está en el parque con sus amigos.",
    "Cada mañana, ______ desayuna antes de ir a la escuela.",
    "El perro ______ rápido por el jardín.",
    "Ella siempre ______ cuando hay problemas.",
    "Durante la clase, ______ atención a la profesora.",
    "Los niños ______ mucho en la fiesta.",
    "Mi hermano ______ frutas y verduras todos los días."
  ];
  return templates[Math.floor(Math.random()*templates.length)];
}
function renderFill(){
  if(!state.words.length) return;
  const w = state.words[fillIndex % state.words.length];
  document.getElementById('fill-sentence').innerText = generateSentence(w);
  document.getElementById('fill-answer').value='';
  document.getElementById('fill-feedback').innerText='';

  // Word bank (4 options)
  const bank = document.getElementById('fill-wordbank');
  bank.innerHTML='';
  let options = [w.es];
  while(options.length<4 && state.words.length>1){
    const r = state.words[Math.floor(Math.random()*state.words.length)].es;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);
  options.forEach(opt=>{
    const b = document.createElement('button');
    b.className='btn ghost';
    b.innerText = opt;
    b.onclick = ()=>document.getElementById('fill-answer').value = opt;
    bank.appendChild(b);
  });
}
document.getElementById('fill-check').addEventListener('click',()=>{
  const w = state.words[fillIndex % state.words.length];
  const ans = document.getElementById('fill-answer').value.trim();
  document.getElementById('fill-feedback').innerText = (ans.toLowerCase()===w.es.toLowerCase()) ? '✅ Correct!' : '❌ Incorrect! Answer: '+w.es;
});
document.getElementById('fill-next').addEventListener('click',()=>{
  fillIndex++;
  renderFill();
});

/* MANAGE WORDS */
function renderWords(){
  const list=document.getElementById('words-list'); list.innerHTML='';
  state.words.forEach((w,i)=>{
    const div=document.createElement('div');
    div.innerText=w.es+' → '+w.en;
    list.appendChild(div);
  });
  renderFlash();
}
document.getElementById('add-word').addEventListener('click',()=>{
  const es=document.getElementById('new-es').value.trim();
  const en=document.getElementById('new-en').value.trim();
  if(!es||!en) return;
  state.words.push({es,en});
  saveState();
  document.getElementById('new-es').value='';
  document.getElementById('new-en').value='';
});
document.getElementById('apply-quick').addEventListener('click',()=>{
  const lines=document.getElementById('quick-import').value.split('\n');
  lines.forEach(l=>{
    const p=l.split(',');
    if(p.length>=2) state.words.push({es:p[0].trim(),en:p[1].trim()});
  });
  saveState();
  document.getElementById('quick-import').value='';
});

/* Keyboard shortcuts */
document.addEventListener('keydown', e=>{
  if(e.key==='Enter'){
    if(document.getElementById('flash').classList.contains('active')) document.getElementById('flip').click();
    if(document.getElementById('fill').classList.contains('active')) document.getElementById('fill-check').click();
  }
  if(e.key==='Shift'){
    if(document.getElementById('flash').classList.contains('active')) document.getElementById('next-card').click();
    if(document.getElementById('fill').classList.contains('active')) document.getElementById('fill-next').click();
  }
});

/* INITIAL RENDER */
renderWords();
renderQuiz();
renderFill();
renderFlash();
</script>
</body>
</html>
	